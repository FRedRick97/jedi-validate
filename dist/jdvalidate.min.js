!function(e){var a={};e.fn.jdvalidate=function(r){var s={ajax:{dataType:"json"},sendType:"serialize",classes:{error:"error",baseError:"base-error",valid:"valid"},clean:!0,rules:{},messages:{},baseError:null};return r=e.extend(s,r),this.each(function(){form=e(this);var s={},t=r.baseError?r.baseError:e("<div></div>").addClass(r.classes.baseError).addClass(r.classes.error).hide();r.baseError||form.prepend(t),form.attr("novalidate","true");var i={},n={};form.find("[name]").each(function(){var a=e(this),s=a.attr("name");n[s]=a,r.rules[s]=r.rules[s]||{},r.rules[s].required=a.is("[required]")||a.hasClass("required"),r.rules[s].email=a.is('[type="email"]')||a.hasClass("email")}).on("change",function(){var a=e(this).attr("name");l(a,r.rules[a])});var o=function(a,s){i[a]||(i[a]=e("<label></label>").attr("for",a).addClass(r.classes.error),n[a].after(i[a])),n[a].addClass(r.classes.error).removeClass(r.classes.valid),i[a].text(s.join(", ")).show()},d=function(e){n[e].removeClass(r.classes.error).addClass(r.classes.valid),i[e]&&i[e].hide()},l=function(s,t){var i=!0,l=[];return e.each(t,function(e,t){if(t)if(a[e]){var i=a[e].func(n[s].val(),n[s],t);if(!i){var o=r.messages[s]&&r.messages[s][e]?r.messages[s][e]:a[e].message;l.push(o)}}else console.error('Method "'+e+'" not found'),l.push('Method "'+e+'" not found')}),l.length?(o(s,l),i=!1):d(s),i},c=function(){var a=!0;return e.each(r.rules,function(e,r){a=l(e,r)&&a}),a};form.on("submit",function(a){if(!c())return a.preventDefault(),!1;if(!r.ajax)return!1;if(a.preventDefault(),s.url=form.attr("action"),s.method=form.attr("method"),"formData"===r.sendType)s.processData=!1,s.data=new FormData(form.get(0));else if("json"===r.sendType){var l={};e.each(n,function(e,a){l[e]=a.val()}),s.data=JSON.stringify(l)}else"serialize"===r.sendType&&(s.data=form.serialize());s=e.extend(s,r.ajax),e.each(i,d),e.ajax(s).done(function(a){a.validationErrors?(e.each(n,function(e){i[e]&&!a.validationErrors[e]&&i[e].hide()}),a.validationErrors.base?(t.text(a.validationErrors.base.join(", ")).show(),delete a.validationErrors.base):t.hide(),e.each(a.validationErrors,o)):a.redirect?window.location.replace(a.redirect):r.clean&&form.get(0).reset()}).fail(function(e){console.log(e)})})})},e.jdvalidate={},e.jdvalidate.addMethod=function(e,r,s){a[e]={func:r,message:s}},e.jdvalidate.addMethod("required",function(e,a){return""!=e.trim()&&!a.is('[type="checkbox"]')||a.is('[type="checkbox"]')&&a.is(":checked")},"Field is required"),e.jdvalidate.addMethod("regexp",function(e,a,r){return r.test(e)},"Please check your input."),e.jdvalidate.addMethod("email",function(e){return/[a-z]+@[a-z]+\.[a-z]+/.test(e)},"Please check your e-mail."),e.jdvalidate.addMethod("filesize",function(e,a,r){return!a.get(0).files[0]||a.get(0).files[0].size<=r},"File too big"),e.jdvalidate.addMethod("extension",function(e,a,r){return!a.get(0).files[0]||r.indexOf(a.get(0).files[0].name.split(".").pop())>-1},"Extension is wrong")}(jQuery);
//# sourceMappingURL=jdvalidate.min.js.map
