!function(e){var s={};e.fn.jdvalidate=function(r){var a={ajax:{dataType:"json"},sendType:"serialize",classes:{error:"error",baseError:"base-error",valid:"valid"},clean:!0,rules:{},messages:{},baseError:null,parent:{}},t={};return t.options=e.extend(a,r),t.form=this,t.baseError=t.options.baseError?t.options.baseError:e("<div></div>").addClass(t.options.classes.baseError).addClass(t.options.classes.error).hide(),t.options.baseError||t.form.prepend(t.baseError),t.form.attr("novalidate","true"),t.inputs={},t.labels={},t.rules={},t.form.find("[name]").each(function(){var s=e(this),r=s.attr("name");t.inputs[r]=s,t.rules[r]=t.options.rules[r]||{},t.rules[r].required=s.is("[required]")||s.hasClass("required"),t.rules[r].email=s.is('[type="email"]')||s.hasClass("email")}).on("change.jdvalidate",function(){var s=e(this).attr("name");t.checkInput(s,t.rules[s])}),t.form.on("submit.jdvalidate",function(s){if(!t.checkForm())return s.preventDefault(),!1;if(!t.options.ajax)return!1;s.preventDefault();var r={};if(r.url=t.form.attr("action"),r.method=t.form.attr("method"),"formData"===t.options.sendType)r.processData=!1,r.data=new FormData(t.form.get(0));else if("json"===t.options.sendType){var a={};e.each(t.inputs,function(e,s){a[e]=s.is('[type="checkbox"]')&&s.is(":checked")||!s.is('[type="checkbox"]')?s.val():""}),r.data=JSON.stringify(a)}else"serialize"===t.options.sendType&&(r.data=t.form.serialize());r=e.extend(r,t.options.ajax),e.each(t.labels,t.markValid),e.ajax(r).done(function(s){s.validationErrors?(e.each(t.inputs,function(e){t.labels[e]&&!s.validationErrors[e]&&t.labels[e].hide()}),s.validationErrors.base?(t.baseError.text(s.validationErrors.base.join(", ")).show(),delete s.validationErrors.base):t.baseError.hide(),e.each(s.validationErrors,t.markError)):s.redirect?window.location.replace(s.redirect):t.options.clean&&t.form.get(0).reset()}).fail(function(e){var s=r.method+" "+r.url+" "+e.status+" ("+e.statusText+")";t.baseError.text(s).show(),console.error(s)})}),t.markError=function(s,r){t.labels[s]||(t.labels[s]=e("<label></label>").attr("for",s).addClass(t.options.classes.error),t.options.parent?t.inputs[s].closest(t.options.parent.selector).append(t.labels[s]):t.inputs[s].after(t.labels[s])),t.options.parent&&t.inputs[s].closest(t.options.parent.selector).addClass(t.options.parent.classes.error).removeClass(t.options.parent.classes.valid),t.inputs[s].addClass(t.options.classes.error).removeClass(t.options.classes.valid),t.labels[s].text(r.join(", ")).show()},t.markValid=function(e){t.inputs[e].removeClass(t.options.classes.error).addClass(t.options.classes.valid),t.options.parent&&t.inputs[e].closest(t.options.parent.selector).addClass(t.options.parent.classes.valid).removeClass(t.options.parent.classes.error),t.labels[e]&&t.labels[e].hide()},t.checkInput=function(r,a){var o=!0,i=[],n=!s.required.func(t.inputs[r].val(),t.inputs[r]);if(n&&a.required){var l=t.options.messages[r]&&t.options.messages[r].required?t.options.messages[r].required:s.required.message;i.push(l)}else n||e.each(a,function(e,a){if(a)if(s[e]){var o=s[e].func(t.inputs[r].val(),t.inputs[r],a);if(!o){var n=t.options.messages[r]&&t.options.messages[r][e]?t.options.messages[r][e]:s[e].message;i.push(n)}}else console.error('Method "'+e+'" not found'),i.push('Method "'+e+'" not found')});return i.length?(t.markError(r,i),o=!1):t.markValid(r),o},t.checkForm=function(){var s=!0;return e.each(t.rules,function(e,r){s=t.checkInput(e,r)&&s}),t.baseError.text("").hide(),s},t.form},e.jdvalidate={},e.jdvalidate.addMethod=function(e,r,a){s[e]={func:r,message:a}}}(jQuery),function(e){e.jdvalidate.addMethod("required",function(e,s){return""!=e.trim()&&!s.is('[type="checkbox"]')||s.is('[type="checkbox"]')&&s.is(":checked")},"The field is required"),e.jdvalidate.addMethod("regexp",function(e,s,r){return r.test(e)},"The field value is invalid"),e.jdvalidate.addMethod("email",function(e){return/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i.test(e)},"The e-mail is invalid"),e.jdvalidate.addMethod("filesize",function(e,s,r){return!s.get(0).files[0]||s.get(0).files[0].size<=r},"The file is too large"),e.jdvalidate.addMethod("extension",function(e,s,r){return!s.get(0).files[0]||r.indexOf(s.get(0).files[0].name.split(".").pop())>-1},"The file extension is invalid")}(jQuery);
//# sourceMappingURL=jdvalidate.min.js.map
