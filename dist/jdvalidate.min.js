!function(e){var r={};e.fn.jdvalidate=function(a){var s={ajax:{dataType:"json"},sendType:"serialize",classes:{error:"error",baseError:"base-error",valid:"valid"},clean:!0,rules:{},messages:{},baseError:null},t={};return t.options=e.extend(s,a),t.form=this,t.baseError=t.options.baseError?t.options.baseError:e("<div></div>").addClass(t.options.classes.baseError).addClass(t.options.classes.error).hide(),t.options.baseError||t.form.prepend(t.baseError),t.form.attr("novalidate","true"),t.inputs={},t.labels={},t.rules={},t.form.find("[name]").each(function(){var r=e(this),a=r.attr("name");t.inputs[a]=r,t.rules[a]=t.options.rules[a]||{},t.rules[a].required=r.is("[required]")||r.hasClass("required"),t.rules[a].email=r.is('[type="email"]')||r.hasClass("email")}).on("change.jdvalidate",function(){var r=e(this).attr("name");t.checkInput(r,t.rules[r])}),t.form.on("submit.jdvalidate",function(r){if(!t.checkForm())return r.preventDefault(),!1;if(!t.options.ajax)return!1;r.preventDefault();var a={};if(a.url=t.form.attr("action"),a.method=t.form.attr("method"),"formData"===t.options.sendType)a.processData=!1,a.data=new FormData(t.form.get(0));else if("json"===t.options.sendType){var s={};e.each(t.inputs,function(e,r){s[e]=r.val()}),a.data=JSON.stringify(s)}else"serialize"===t.options.sendType&&(a.data=t.form.serialize());a=e.extend(a,t.options.ajax),e.each(t.labels,t.markValid),e.ajax(a).done(function(r){r.validationErrors?(e.each(t.inputs,function(e){t.labels[e]&&!r.validationErrors[e]&&t.labels[e].hide()}),r.validationErrors.base?(t.baseError.text(r.validationErrors.base.join(", ")).show(),delete r.validationErrors.base):t.baseError.hide(),e.each(r.validationErrors,t.markError)):r.redirect?window.location.replace(r.redirect):t.options.clean&&t.form.get(0).reset()}).fail(function(e){var r=a.method+" "+a.url+" "+e.status+" ("+e.statusText+")";t.baseError.text(r),console.error(r)})}),t.markError=function(r,a){t.labels[r]||(t.labels[r]=e("<label></label>").attr("for",r).addClass(t.options.classes.error),t.inputs[r].after(t.labels[r])),t.inputs[r].addClass(t.options.classes.error).removeClass(t.options.classes.valid),t.labels[r].text(a.join(", ")).show()},t.markValid=function(e){t.inputs[e].removeClass(t.options.classes.error).addClass(t.options.classes.valid),t.labels[e]&&t.labels[e].hide()},t.checkInput=function(a,s){var i=!0,o=[];return e.each(s,function(e,s){if(s)if(r[e]){var i=r[e].func(t.inputs[a].val(),t.inputs[a],s);if(!i){var n=t.options.messages[a]&&t.options.messages[a][e]?t.options.messages[a][e]:r[e].message;o.push(n)}}else console.error('Method "'+e+'" not found'),o.push('Method "'+e+'" not found')}),o.length?(t.markError(a,o),i=!1):t.markValid(a),i},t.checkForm=function(){var r=!0;return e.each(t.rules,function(e,a){r=t.checkInput(e,a)&&r}),r},t.form},e.jdvalidate={},e.jdvalidate.addMethod=function(e,a,s){r[e]={func:a,message:s}}}(jQuery),function(e){e.jdvalidate.addMethod("required",function(e,r){return""!=e.trim()&&!r.is('[type="checkbox"]')||r.is('[type="checkbox"]')&&r.is(":checked")},"The field is required"),e.jdvalidate.addMethod("regexp",function(e,r,a){return a.test(e)},"The field value is invalid"),e.jdvalidate.addMethod("email",function(e){return/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i.test(e)},"The e-mail is invalid"),e.jdvalidate.addMethod("filesize",function(e,r,a){return!r.get(0).files[0]||r.get(0).files[0].size<=a},"The file is too large"),e.jdvalidate.addMethod("extension",function(e,r,a){return!r.get(0).files[0]||a.indexOf(r.get(0).files[0].name.split(".").pop())>-1},"The file extension is invalid")}(jQuery);
//# sourceMappingURL=jdvalidate.min.js.map
